<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TodoList</title>
    <style>
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "urbanist" , sans-serif;
        }
        html{
            color: #fff;
            font-size: 62.5%;
        }
        body{
        width: 100%;
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-top: 100px;
        background-color: black;
        }
    li{
      cursor: pointer;
      list-style-type: circle;
      margin: 2rem 0;
      text-transform: capitalize;
      font-weight: 500;
      &:hover{
        color: #feac5e;
      }
    }
    .main-todo-div{
       width: 36rem;
       display: grid;
       grid-template-columns: 1fr 0.3fr; 
       align-items: center;
       height: auto;
    }
    button{
        height: 4rem;
    }
    h1{
        font-size: 3.6rem;
        margin-top: 4.8rem;
    }
    hr{
        margin-bottom: 3.2rem;
    }
    p,li,button{
        font-size: 1.7rem;
        letter-spacing: 0.1rem;
        font-family: "urbanist",sans-serif;
        line-height: 1.6;
    }
    button{
        background-color: #f5ee62;
        padding: 0.6rem 2.4rem;
        border-radius: 10rem;
        margin-right: 3.6rem;
        cursor: pointer;
        transition: all 0.3s linear;
        &:hover{
        box-shadow: inset 0 0 0 0.2rem #f5ee62;
        background-color: transparent;
        color: #f5ee62;
        }
    }

    </style>
</head>
<body>
    <h1>Todo List</h1><br>
    <form action="">
    <div class="container">
      <input type="text" id="inputValue">
      <button class="btn">Add todo</button>
    </div>
    <section class="todo-list-elem">

    </section>


   </form>
  <script>
   
   const getTodoListFromLocal = ()=>{
  const getTodoListFromLocal = () => {
  const storedList = localStorage.getItem("youtubeTodoList");
  if (!storedList) {
    return [];  // return empty array if nothing stored
  }
  try {
    return JSON.parse(storedList);
  } catch (e) {
    console.error("Invalid JSON in localStorage:", e);
    return [];  // fallback to empty list
  }
};

   }
    const addTodoListLocalStorage = (localTodoList)=>{
        return localStorage.setItem("youtubeTodoList",JSON.stringify(localTodoList));

    }
   
    let localTodoList = getTodoListFromLocal() || []; 
 const mainTodoElem = document.querySelector(".todo-list-elem");
  const inputValue =  document.querySelector("#inputValue");

  const addTodoDynamicElement = (currElem) =>{
    const divElement = document.createElement("div");
    divElement.classList.add("main-todo-div");
    divElement.innerHTML = `<li>${currElem}</li> <button class="deleteBtn">Delete</button>`
    mainTodoElem.append(divElement);

  }



   const addTodoList =(e) =>{
    e.preventDefault();
    
    const todoListValue = inputValue.value.trim();
    inputValue.value = "";


    if(todoListValue !== "" && !localTodoList.includes(todoListValue)){

    localTodoList.push(todoListValue);
    localTodoList = [...new Set(localTodoList)];

    console.log(localTodoList);

   localStorage.setItem("youtubeTodoList",JSON.stringify(localTodoList));  
  

    
    
     addTodoDynamicElement(todoListValue);
   }
};
    const showTodoList = () => {
        console.log(localTodoList);

        localTodoList.forEach((currElem) =>{
           addTodoDynamicElement(currElem);
        });
        
        
    }
    showTodoList();
    
    const removeTodoElem = (e) =>{
        const todoRemove = e.target;
        let todoListContent = todoRemove.previousElementSibling.innerText;
        console.log(todoListContent);
        let parentElem = todoRemove.parentElement;

        localTodoList = localTodoList.filter((currTodo)=>{
           
            return currTodo !== todoListContent.toLowerCase();
            
        });
        addTodoListLocalStorage(localTodoList);
        parentElem.remove();
        console.log(localTodoList);
        
        
    }

    mainTodoElem.addEventListener('click',(e)=>{
         e.preventDefault();
         if(e.target.classList.contains("deleteBtn")){
        removeTodoElem(e);
         }
        
    })
 
  document.querySelector(".btn").addEventListener('click',(e)=>{
    addTodoList(e);
  });

  </script>  
</body>
</html>